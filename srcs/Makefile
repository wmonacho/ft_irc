# # NAME ===============================================================
# NAME =		ircserv
# #====================================================================

# # FILES ==============================================================
# FILES =		main							\
# 			server/server				\
# 			channel/Channel			\
# 			User_srcs/User					\
# # ====================================================================

# # HEADER =============================================================
# HEADER =	server/server.hpp					\
# 			channel/Channel.hpp					\
# 			User_srcs/User.hpp					\

# # ====================================================================

# # FLAGS ==============================================================
# FLAGS =		-Wall -Wextra -Werror -std=c++98
# # ====================================================================

# # COMPIL =============================================================
# CC =		c++
# # ====================================================================

# # SUB_DIR_LST ========================================================
# SUB_DIR_LST =	server channel User_srcs
# # ====================================================================

# # OBJS_DIR ===========================================================
# OBJS_DIR =	.objs
# # ====================================================================

# # DIR_SRC ============================================================
# DIR_SRC := srcs#.
# # ====================================================================

# # OBJ ================================================================
# OBJ			=	$(addprefix $(OBJS_DIR)/, $(addsuffix .o,$(FILES)))
# # ====================================================================

# # SUB_DIR ============================================================
# SUB_DIR		=	$(addprefix $(OBJS_DIR)/,$(SUB_DIR_LST))
# # ====================================================================

# all:				$(NAME)

# $(NAME):			$(OBJ)
# 					$(CC) $(OBJ) -o $(NAME)

# $(OBJS_DIR)/%.o:	$(DIR_SRC)/%.cpp Makefile $(DIR_SRC)/$(HEADER) | $(OBJS_DIR)
# 					${CC} ${FLAGS} -c $< -o $@

# $(OBJS_DIR):
# 					mkdir -p $(SUB_DIR)

# clean :
# 					rm -f ${OBJ} ${OBJ_B} $(OBJS_DIR)/*.o 

# fclean :
# 					rm -f ${OBJ} ${OBJ_B} $(OBJS_DIR)/*.o
# 					rm -f ${NAME}
# 					rm -rf $(OBJS_DIR)

# re :				fclean all

# .PHONY:				all clean fclean re

# NAME ===========================================
NAME =		ircserv
# ================================================

# FILES ==========================================
FILES =		main.cpp							\
			server/server.cpp					\
			channel/Channel.cpp					\
			user/User.cpp					\
# ================================================

# HEADER =========================================
HEADER =	server/server.hpp					\
			channel/Channel.hpp					\
			user/User.hpp					\

# ================================================

# FLAGS ==========================================
FLAGS =		-Wall -Wextra -Werror -std=c++98
# ================================================

# COMPIL =========================================
CC =		c++
# ================================================

SUB_DIR_LST =	server channel user

# OBJS_DIR =======================================
OBJS_DIR =	.objs
# ================================================

# OBJ ============================================
OBJ 		= 	$(addprefix $(OBJS_DIR)/, $(FILES:.cpp=.o))
# ================================================

# SUB_DIR ============================================================
SUB_DIR		=	$(addprefix $(OBJS_DIR)/,$(SUB_DIR_LST))
# ====================================================================

all:				$(NAME)

$(NAME):			$(OBJ)
					$(CC) $(OBJ) -o $(NAME)

$(OBJS_DIR)/%.o:	%.cpp Makefile $(HEADER) | $(OBJS_DIR)
					${CC} ${FLAGS} -c $< -o $@

$(OBJS_DIR):
					mkdir -p $(OBJS_DIR)
					mkdir -p $(SUB_DIR)

clean :
					rm -f ${OBJ} ${OBJ_B} $(OBJS_DIR)/*.o 

fclean :
					rm -f ${OBJ} ${OBJ_B} $(OBJS_DIR)/*.o
					rm -f ${NAME}
					rm -rf $(OBJS_DIR)

re :				fclean all

.PHONY:				all clean fclean re